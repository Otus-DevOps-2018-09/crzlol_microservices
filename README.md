# crzlol_microservices
crzlol microservices repository

## Homework-13. Docker-2
### Самостоятельное задание
Если запустить докер в pid-namespace host, то он попадет в общее пространство pidов и изоляции не будет.
 - Создали Dockerfile с описанием содержимого в контейнере
 - Создали образ
 - Зарегались на докерхабе и залили туда образ
 - Установили образ из докерхаба на локальную машину

### Задание со *
 - Реализовали поднятие инстансов с помощью Terraform
 - Создали несколько плейбуков Ansible для раската докера и приложения в контейнере
 - Ansible работает через динамик инвентори
 - Создали шаблон для пакера
 - Щаблон пакера использует те же плейбуки Ansible, базовый образ с докером готовится с помощью without-tags (чтобы исключить таски с раскатом приложения)

## Homework-14. Docker-3
### Самостоятельное задание
При сборке post-py приложений столкнулся с ошибкой "unable to execute 'gcc': No such file or directory".
Решил через допольнительный RUN apk add --no-cache --virtual .build-deps gcc musl-dev.

### Задание со *
 - Другие сетевые алиасы указал через --network-alias
 - Переменные окружения указал через --env
 - Собрал образы на Alpine Linux
 - Еще способ - убрать все WORKDIR из инструкций, и слепить все в один большой RUN. Это сделано в Dockerfile.1, но это не рекомендовано в документации как сложночитаемое решение
 - Создали структуру с контейнерами и Volume

 ## Homework-15. Docker-4
### Самостоятельное задание
Если запустить несколько раз
```
docker run --network host -d nginx
```
то в процессах мы увидим только один процесс. Я думаю, что это связано с тем, что так как мы запускаем все контейнеры в namespace хоста, то они не могут поделить 80 порт, поэтому
первый контейнер работает, а остальные не могут заполучить порт и падают.
Базовое имя проекта образуется по-умолчанию из названия WORK_DIR для Docker-compose. Его можно задать через параметр --project-name для docker-compose или изменить название каталога.
